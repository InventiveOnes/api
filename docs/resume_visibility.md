# Списки видимости резюме



* [Получение списков видимости](#get)
* [Добавление компаний в список видимости](#add)
* [Удаление компаний из списка видимости](#remove)
* [Очистка списка видимости](#clear)


<a name="get"></a>
## Получение списков видимости

``` 
GET /resumes/{resume_id}/{list_type}
```

где:
* `resume_id` — идентификатор резюме
* `list_type` — тип списка (можно узнать в [справочнике resume_visibility_list_type](/docs/dictionaries.md#etc))

Поддерживаются [стандартные параметры пагинации](/docs/general.md#pagination) `page` и `per_page`
(`per_page` <= 100). 


### Успешный ответ

Успешный ответ приходит с кодом `200 OK` и содержит тело:

```json
{
    "found": 11,
    "page": 0,
    "pages": 1,
    "per_page": 20,
    "limit": 2000,
    "can_add": 1989,
    "items": [
        {
            "id": "1455",
            "name": "HeadHunter",
            "url": "https://api.hh.ru/employers/1455",
            "alternate_url": "https://hh.ru/employer/1455"
        }
    ]
}
```

Ответ включает [стандартные поля пагинации](/docs/general.md#pagination), а также:

Имя | Тип | Описание
----|-----|---------
limit | number | Максимальное количество элементов в списке.
can_add | number | Количество элементов, которые можно добавить в список.
items | array | Список компаний.
items.id | string | Идентификатор работодателя.
items.name | string | Название работодателя.
items.url | string | Ссылка на детальное описание работодателя.
items.alternate_url | string | Ссылка на описание работодателя на сайте.


### Ошибки

* `404 Not Found` – резюме с указанным идентификатором не найдено. 



<a name="add"></a>
## Добавление компаний в список видимости

```
POST /resumes/{resume_id}/{list_type}
```

где:
* `resume_id` — идентификатор резюме
* `list_type` — тип списка (можно узнать в [справочнике resume_visibility_list_type](/docs/dictionaries.md#etc))

В теле запроса нужно передать json вида:

```json
{
    "items": [
        {
            "id": "407"
        },
        {
            "id": "412"
        },
    ]
}
```

Имя | Тип | Описание
----|-----|---------
items | array | список добавляемых компаний
items.id | string | идентификатор работодателя

Любые другие поля в элементах массива `items` игнорируются.

Добавление в список идемпотентно, то есть добавление работодателей, уже присутствующих в списке,
игнорируется и не приводит к дублированию записей.


### Успешный ответ

В случае успешного добавления вернётся ответ `204 No Content` без тела и с заголовком `Location`,
указывающим на [список видимости](#get):

```
Location: /resumes/{resume_id}/{list_type}
```


### Ошибки

* `400 Bad Request` — передан пустой список компаний.
* `404 Not Found` — резюме с указанным идентификатором не найдено или недоступно текущему пользователю.
* [Дополнительные ошибки с описанием причины](/docs/errors.md#resume-visibility-lists-add).

При возникновении любой ошибки ни одна компания не добавляется в список (независимо от типа ошибки).
